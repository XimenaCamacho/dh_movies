<!DOCTYPE html>
<html lang="en">
<head>
<%- include('../partials/head') %>
<link rel="stylesheet" href="/stylesheets/formsCreateEdit.css">
</head>
<body>
<%- include('../partials/header') %> 
<%- include('../partials/search') %> 
  <main class="form_main_container">
    <section class="form_section_container">
      <h2>Editar película:</h2>
      <article class="form_article_container">
          <form action="/movies/edit/<%= editMovie.id %>?_method=PUT" method="POST">
          <div>
            <label for="">Titulo:</label>
            <input type="text" name="title" value="<%= editMovie.title %> ">  
          </div>
          <div>
            <label for="">Rating:</label>
            <input type="text" name="rating" value="<%= editMovie.rating %> ">
          </div>
          <div>
            <label for="">Premios:</label>
            <input type="text" name="awards" value="<%= editMovie.awards %> ">
          </div>
          <div>
            <label for="">Fecha de estreno:</label>
            <input type="date" name="release_date" value="<%= editMovie.release_date %>" autocomplete="on">
          </div>
          <div>
            <label for="">Duración:</label>
            <input type="text" name="length" value="<%= editMovie.length %> ">
          </div>
          <div>
            <label for="">Género:</label>
            <select name="genre_id" >
                <% allGenres.forEach(genre => { %>
                  <% if (editMovie.id === genre.id) { %>
                      <option value="<%= genre.id %>" selected> <%= genre.name %> </option>
                  <% } %>
                  <option value="<%= genre.id %>"> <%= genre.name %> </option>
                <% }) %>
            </select>
          </div>
          <div class="form_select_actor"> 
            <label for="">Actores:</label>
            <select name="actor" multiple >
            <% allActors.forEach(actor=> { %>
                <% if (editMovie.actor.some(actorMovie => actorMovie.id==actor.id)) { %>
                    <option value="<%= actor.id %>" selected>  <%= actor.first_name %> <%= actor.last_name %> </option>
                <% } else { %>
                    <option value="<%= actor.id %>">  <%= actor.first_name %> <%= actor.last_name %> </option>
                <% } %>
            <% }) %>
            </select>
          </div>
          <div class="form_buttons">
            <button type="submit">Editar película</button>
          </div>
        </form>
      </article>
    </section>
  </main>
<%- include('../partials/footer') %>